"!FILEOUTVERSION: 3"| obobject17764411904 obsetmetaobject65 obobject16975962112 obobject14681050112 obobject11684720128 obsetmetaobject64 obobject13650641408 obobject12563871744 obobject152883584 lapuertadelascensor |lapuertadelascensor := OBLesson new title: 'La puerta!! del ascensor!!!'.self addLesson: lapuertadelascensor.obsetmetaobject65 := (lapuertadelascensor literalNamed: #'set') basicClone.obobject13650641408 := OBMetaObject newOn: lapuertadelascensor.obobject12563871744 := OBMetaObject newOn: lapuertadelascensor.obobject16975962112 := OBMetaObject newOn: lapuertadelascensor.obobject11684720128 := OBMetaObject newOn: lapuertadelascensor.obsetmetaobject64 := (lapuertadelascensor literalNamed: #'set') basicClone.obobject14681050112 := OBMetaObject newOn: lapuertadelascensor.obobject17764411904 := OBMetaObject newOn: lapuertadelascensor.obobject152883584 := OBMetaObject newOn: lapuertadelascensor.obobject13650641408 compileMethod: 'peso	^ 90'.obobject13650641408 compileMethod: 'piso	^ 3'.obobject12563871744 compileMethod: 'peso	^ 80'.obobject12563871744 compileMethod: 'piso	^ 3'.obobject16975962112 addAttributeNamed: 'ascensor'.obobject16975962112 addAttributeNamed: 'personasEsperando'.obobject16975962112 compileMethod: 'ascensor: unAscensor	ascensor := unAscensor '.obobject16975962112 compileMethod: 'subiATodosLosQuePuedan	personasEsperando do: [ :persona | ascensor subiSiPodesA: persona  ].	personasEsperando removeAll: ascensor personas '.obobject16975962112 compileMethod: 'entra: unaPersona	personasEsperando add: unaPersona '.obobject16975962112 compileMethod: 'personasEsperando	^ personasEsperando'.obobject16975962112 compileMethod: 'initialize	personasEsperando := Set new.'.obobject11684720128 addAttributeNamed: 'capacidadMaxima'.obobject11684720128 addAttributeNamed: 'personas'.obobject11684720128 compileMethod: 'capacidadMaxima	^ capacidadMaxima'.obobject11684720128 compileMethod: 'capacidadDisponible 	^ self capacidadMaxima - self capacidadOcupada'.obobject11684720128 compileMethod: 'bajarATodosLosQueVanA: unPiso	personas removeAll: (personas select: [:persona | persona piso = unPiso]).		"Otra alternativa sería cambiar la referencia personas para quedarme con los que no van a ese piso de esta forma:		personas := personas reject: [:persona | persona piso = unPiso]	"'.obobject11684720128 compileMethod: 'capacidadOcupada"Chequeo si está vacía porque sum: sólo funciona si hay elementos (decisión de Pharo que no nos interesa mucho pero con la que hay que convivir)"	^ personas isEmpty			ifTrue: [ 0 ]			ifFalse: [ personas sum: [ :persona | persona peso ] ]'.obobject11684720128 compileMethod: 'subir: unaPersona	personas add: unaPersona '.obobject11684720128 compileMethod: 'personas	^ personas'.obobject11684720128 compileMethod: 'initialize	personas := Set new.'.obobject11684720128 compileMethod: 'puedeSubirA: unaPersona 	^ self capacidadDisponible >= unaPersona peso'.obobject11684720128 compileMethod: 'capacidadMaxima: kilos	capacidadMaxima := kilos'.obobject11684720128 compileMethod: 'subiSiPodesA: unaPersona	(self puedeSubirA: unaPersona )		ifTrue: [ self subir: unaPersona ]'.obobject14681050112 compileMethod: 'peso	^ 40'.obobject14681050112 compileMethod: 'piso	^ 2'.obobject17764411904 compileMethod: 'peso	^ 20'.obobject17764411904 compileMethod: 'piso	^ 6'.obobject152883584 compileMethod: 'peso	^ 120'.obobject152883584 compileMethod: 'piso	^ 6'.obsetmetaobject65 add: obobject12563871744.obsetmetaobject65 add: obobject13650641408.obobject16975962112 attributeNamed: 'ascensor' pointTo: obobject11684720128.obobject16975962112 attributeNamed: 'personasEsperando' pointTo: obsetmetaobject65.obobject11684720128 attributeNamed: 'capacidadMaxima' pointTo: (OBExternalObjectMetaObject new: 180).obobject11684720128 attributeNamed: 'personas' pointTo: obsetmetaobject64.obsetmetaobject64 add: obobject17764411904.obsetmetaobject64 add: obobject14681050112.obsetmetaobject64 add: obobject152883584."Workspaces exported"lapuertadelascensor createWorkspace: 'usando el ascensor' contents: '"Pruebas manuales del sistema, mirar el diagrama para ver las relaciones entre los distintos objetos luego de ejecutar el código.Ver Tests para conocer una alternativa más copada de probar el sistema, haciendo pruebas unitarias (o sea, son independientes entre sí!!! eso es re importante en un contexto en el cual hay efecto colateral)"ascensor initialize.ascensor capacidadMaxima: 180.ascensor subiSiPodesA: fer.ascensor subiSiPodesA: diego.ascensor subiSiPodesA: lucas.ascensor subiSiPodesA: luz."Los que se subieron fueron fer, diego y luz, no lucas"ascensor capacidadOcupada. "Retorna 180"ascensor bajarATodosLosQueVanA: 6. "debería bajar a luz y a fer"ascensor bajarATodosLosQueVanA: 2. "debería bajar a diego y quedar vacío""expandiendo el ejemplo"edificio initialize.edificio ascensor: ascensor.edificio entra: juan.edificio entra: lucas.edificio entra: diego.edificio entra: fer.edificio entra: luz.edificio subiATodosLosQuePuedan.edificio personasEsperando. "Quedaron 2 personas esperando"'.lapuertadelascensor compileTest: 'testSubirATodosLosQueSePuedaDelEdificioedificio subiATodosLosQuePuedan.self assert: ascensor personas size equals: 3.self assert: edificio personasEsperando size equals: 2.self assert: (edificio personasEsperando intersection: ascensor personas) isEmpty'.lapuertadelascensor compileTest: 'setUpascensor initialize.ascensor capacidadMaxima: 180.edificio initialize.edificio ascensor: ascensor.edificio entra: juan.edificio entra: lucas.edificio entra: diego.edificio entra: fer.edificio entra: luz.'.lapuertadelascensor compileTest: 'testLaCapacidadOcupadaDelAscensorDependeDeLasPersonasQueCargaascensor subir: fer.ascensor subir: diego.self assert: ascensor capacidadOcupada equals: 160.ascensor subir: luz .self assert: ascensor capacidadOcupada equals: 180'.lapuertadelascensor compileTest: 'testSePuedeSubirUnaPersonaSiNoSuperaLaCapacidadMaximaDelAscensorascensor subiSiPodesA:  fer.ascensor subiSiPodesA: lucas .self assert: (ascensor personas includes: fer).self deny: (ascensor personas includes: lucas).'.lapuertadelascensor compileTest: 'testBajarATodosLosQueVanAUnDeterminadoPisoascensor subir: fer.ascensor subir: diego.ascensor subir: luz.ascensor bajarATodosLosQueVanA: 6. self assert: (ascensor personas includes: diego).self assert: ascensor personas size equals: 1.'.lapuertadelascensor createVariableNamed: 'ascensor' pointingTo: obobject11684720128.lapuertadelascensor createVariableNamed: 'juan' pointingTo: obobject12563871744.lapuertadelascensor createVariableNamed: 'lucas' pointingTo: obobject13650641408.lapuertadelascensor createVariableNamed: 'diego' pointingTo: obobject14681050112.lapuertadelascensor createVariableNamed: 'fer' pointingTo: obobject152883584.lapuertadelascensor createVariableNamed: 'edificio' pointingTo: obobject16975962112.lapuertadelascensor createVariableNamed: 'luz' pointingTo: obobject17764411904.lapuertadelascensor addObject: obsetmetaobject65.lapuertadelascensor addObject: obobject13650641408.lapuertadelascensor addObject: obobject12563871744.lapuertadelascensor addObject: obobject16975962112.lapuertadelascensor addObject: obobject11684720128.lapuertadelascensor addObject: obsetmetaobject64.lapuertadelascensor addObject: obobject14681050112.lapuertadelascensor addObject: obobject17764411904.lapuertadelascensor addObject: obobject152883584.^ lapuertadelascensor.